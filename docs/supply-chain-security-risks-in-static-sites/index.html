<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/assets/css/main.css" rel="stylesheet" />

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">

        
        
        
            <meta name="description" content="Static sites are perceived as more secure than their dynamic counterparts due to their simplicity and lack of server-side components. However, this assumption can lead to overlooked threats, particularly those introduced by third-party libraries and services. In this article, we&#39;ll explore how these vulnerabilities arise and how you can defend your site against them.">
            <meta property="og:description" content="Static sites are perceived as more secure than their dynamic counterparts due to their simplicity and lack of server-side components. However, this assumption can lead to overlooked threats, particularly those introduced by third-party libraries and services. In this article, we&#39;ll explore how these vulnerabilities arise and how you can defend your site against them.">
            <meta name="description" content="Static sites are perceived as more secure than their dynamic counterparts due to their simplicity and lack of server-side components. However, this assumption can lead to overlooked threats, particularly those introduced by third-party libraries and services. In this article, we&#39;ll explore how these vulnerabilities arise and how you can defend your site against them."/>
        

        
        
            <meta property="og:image" content="/assets/images/shipping-containers-social-image.jpg"/>
            <meta name="twitter:image" content="/assets/images/shipping-containers-social-image.jpg"/>
        

        <title>
            
                Supply Chain Security Risks in Static Sites | Nizar&#39;s Blog
            
        </title>

        <meta property="og:site_name" content="Nizar's Blog">
        <meta property="og:type" content="website">
        <script defer data-domain="nizar.se" src="https://plausible.io/js/script.js"></script>
    </head>
    <body>
        <div class="layout-wrapper">
            <header class="header">
    <div class="header__content">
        <h1 class="site-title">
            <a href="/">Nizar's Blog</a>
        </h1>
        <nav class="nav">
            <ul class="nav__list">
                <li class="nav-item">
                    <a href="/about">About</a>
                </li>
            </ul>
        </nav>
    </div>
</header>
            <main class="main">
                <article class="post">
    <header class="post__header">
        <h1>Supply Chain Security Risks in Static Sites</h1>
        <div class="post__details">
            <time>09 Sep 2024</time>
            <span> | </span>
            <span>4 minutes</span>
        </div>
    </header>

    <div class="post__cover">
        <picture><source type="image/avif" srcset="/supply-chain-security-risks-in-static-sites/oQnxLjt2WV-300.avif 300w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-600.avif 600w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-750.avif 750w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-900.avif 900w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-1200.avif 1200w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-1400.avif 1400w" sizes="Cover image"><source type="image/jpeg" srcset="/supply-chain-security-risks-in-static-sites/oQnxLjt2WV-300.jpeg 300w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-600.jpeg 600w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-750.jpeg 750w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-900.jpeg 900w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-1200.jpeg 1200w, /supply-chain-security-risks-in-static-sites/oQnxLjt2WV-1400.jpeg 1400w" sizes="Cover image"><img alt="Cover image" loading="lazy" decoding="async" src="/supply-chain-security-risks-in-static-sites/oQnxLjt2WV-300.jpeg" width="1400" height="787"></picture>
        <p class="post__cover-caption">Original photo by <a href="https://unsplash.com/@ventiviews">Venti Views</a> on <a href="https://unsplash.com/photos/aerial-view-of-city-buildings-during-daytime-6p0JBES_65E">Unsplash</a></p>
    </div>

    <main class="post__content">
        <p>Static sites are perceived as more secure than their dynamic counterparts due to their simplicity and lack of
server-side components. However, this assumption can lead to overlooked threats, particularly those introduced by
third-party libraries and services. In this article, we'll explore how these vulnerabilities arise and how you can
defend your site against them.</p>
<h2>What Are Static Sites?</h2>
<p>Static websites consist of pre-rendered HTML, CSS, and JavaScript files that are delivered directly to the user's
browser. Their appeal lies in their speed, scalability, and cost-effectiveness. By avoiding server-side processing,
static sites improve performance and reduce resource consumption.</p>
<p>However, many static sites rely on third-party JavaScript libraries or external services for added functionality, such
as form handling or analytics. This introduces supply chain vulnerabilities, where compromised dependencies become
attack vectors.</p>
<h2>The Threat of Supply Chain Attacks</h2>
<p>Supply chain attacks occur when third-party code that your site relies on is compromised. One notorious example is the
<a href="https://sansec.io/research/polyfill-supply-chain-attack">Polyfill.io attack</a>, where malicious code affected over
100,000 websites by selectively redirecting users to a sports betting site while avoiding detection by analytics and
admin users:</p>
<blockquote>
<p>The code has specific protection against reverse engineering, and only activates on specific mobile devices at
specific hours. It also does not activate when it detects an admin user. It also delays execution when a web analytics
service is found, presumably to not end up in the stats.</p>
</blockquote>
<p>Similarly, Cloudflare's CDNJS service exposed up to <a href="https://www.bleepingcomputer.com/news/security/critical-cloudflare-cdn-flaw-allowed-compromise-of-12-percent-of-all-sites/">12% of websites</a>
to potential code injection attacks, showing that even well-regarded Content Delivery Networks (CDNs) can be vulnerable.</p>
<h2>Defending Against Supply Chain Attacks</h2>
<p>The best defenses against supply chain attacks include <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">Subresource Integrity</a>
(SRI) and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Content Security Policy</a> (CSP). These tools work best
as part of a layered security approach.</p>
<h3>Subresource Integrity (SRI)</h3>
<p>SRI ensures that fetched resources, such as JavaScript files, have not been tampered with by comparing their
cryptographic hash to an expected value. If a file has been altered, the browser will block it from running malicious
code.</p>
<p>For example:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.example.com/script.js<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-abc123...<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<p>In this example, the <code>integrity</code> attribute contains the cryptographic hash of the script. If the file's content is
altered unexpectedly, the browser will reject it. Tools like <a href="https://www.npmjs.com/package/webpack-subresource-integrity">webpack-subresource-integrity</a>
can automate the generation of these hashes, reducing the risk of human error.</p>
<h3>Content Security Policy (CSP)</h3>
<p>CSP is another vital defense mechanism that complements SRI. By defining which sources are allowed to load resources
such as scripts, styles, and images, CSP reduces the risk of code injections.</p>
<p>Pairing CSP with SRI, as recommended by the <a href="https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html#defense-in-depth">OWASP CSP Cheat Sheet</a>,
offers a powerful safeguard:</p>
<blockquote>
<p>Even on a fully static website, which does not accept any user input, a CSP can be used to enforce the use of
Subresource Integrity (SRI). This can help prevent malicious code from being loaded on the website if one of the
third-party sites hosting JavaScript files (such as analytics scripts) is compromised.</p>
</blockquote>
<p>For example, a basic policy that only allows scripts from the same domain and a trusted CDN can look like this:</p>
<pre class="language-text"><code class="language-text">Content-Security-Policy: script-src 'self' https://cdn.example.com; style-src 'self';</code></pre>
<p>A particularly effective strategy for static sites is to use hash-based CSP, where only scripts and styles with matching
cryptographic hashes are allowed to execute. This ensures that only authorized content is loaded, even if a trusted
source is compromised.</p>
<pre class="language-text"><code class="language-text">Content-Security-Policy: script-src 'sha384-abc123...' 'sha384-def456...';</code></pre>
<h3>Best Practices for CSP Implementation</h3>
<p>To maximize CSP's effectiveness, follow these best practices:</p>
<ul>
<li><strong>Use a strict default policy</strong>: Start with <code>default-src 'none'</code> and then explicitly allow trusted sources.</li>
<li><strong>Apply restrictions to all sources</strong>: Use <code>style-src</code>, <code>media-src</code>, and other directives to tightly control which
external resources are loaded.</li>
<li><strong>Avoid unsafe directives</strong>: Directives like <code>unsafe-inline</code> and <code>unsafe-eval</code> can undermine your policy by allowing
inline scripts and styles.</li>
<li><strong>Prevent clickjacking</strong>: Use <code>frame-ancestors</code> to block other sites from embedding your content in iframes.</li>
<li><strong>Test with reporting</strong>: Before enforcing CSP, use <code>report-only</code> mode to monitor violations without disrupting
functionality.</li>
</ul>
<p>These strategies help defend against exploits like Cross-Site Scripting (XSS), clickjacking, and content manipulation,
offering robust protection for your site.</p>
<h3>Common Threats and How CSP Helps</h3>
<p>When combined with SRI, a well-configured CSP protects against several common threats:</p>
<ul>
<li><strong>Cross-Site Scripting (XSS)</strong>: Malicious scripts injected into a site can steal data, hijack sessions, or carry out
unwanted actions. CSP limits the ability of unauthorized scripts to execute.</li>
<li><strong>Clickjacking</strong>: Attackers trick users into clicking hidden elements, leading to unintended actions such as form
submissions or transactions. CSP can prevent the use of frames, which are often used for clickjacking.</li>
<li><strong>Site Defacement</strong>: Attackers can alter the content of a website, damaging its credibility. CSP, combined with SRI,
ensures that only trusted content and scripts are loaded, reducing the likelihood of defacement.</li>
</ul>
<h2>Automating Security Practices</h2>
<p>At <a href="https://www.factor10.com/">factor10</a>, we automate several security practices to reduce human error and maintain
flexibility for quick security intervention. Here's how we do it:</p>
<ol>
<li><strong>Automated Script Handling</strong>: During our build process, a utility fetches the latest versions of third-party
scripts, ensuring we control when updates are introduced.</li>
<li><strong>Automated SRI Generation</strong>: Hashes for all fetched scripts are automatically calculated and embedded
into the HTML, ensuring integrity.</li>
<li><strong>Automated Security Headers</strong>: CSP rules are generated and applied to our NGINX configuration during deployment.
If any verification fails, the deployment is discarded, maintaining the security of the live site.</li>
</ol>
<p>By automating these steps and pairing them with monitoring tools, we ensure security practices are consistently applied.
Alerts notify our team when deviations from the expected security posture occur, allowing us to maintain control and
respond quickly.</p>
<h2>Tools for Security Testing</h2>
<p>Testing your site's security is crucial for maintaining a strong defense against supply chain attacks. Several
tools can help assess and improve your security posture:</p>
<ul>
<li><a href="https://csp-evaluator.withgoogle.com/">Google’s CSP Evaluator</a>: Analyzes your CSP policy and offers suggestions for
strengthening it.</li>
<li><a href="https://observatory.mozilla.org/">Mozilla Observatory</a>: Provides insights into security headers and suggests
improvements.</li>
<li><a href="https://securityheaders.com/">securityheaders.com</a>: Tests your site's HTTP headers based on best practices.</li>
<li><a href="http://webperf.se">webperf.se</a>: Offers an <a href="https://github.com/Webperf-se/webperf_core">open-source suite</a> for
analyzing performance, accessibility, and security.</li>
</ul>
<p>For our <a href="https://factor10.com/websites/">sustainable-websites</a>, we use <a href="https://webperf.se/erbjudande/">webperf's premium service</a>
for daily tests, alongside automated alerts via <a href="https://webperf.se/articles/webhooks/">webhooks</a> on Slack to notify us
of any issues.</p>
<h2>Conclusion</h2>
<p>While static websites are simpler than dynamic ones, they are not immune to modern supply chain threats. The Polyfill.io
incident serves as a reminder that even static sites can be compromised by third-party dependencies. Implementing
security measures like Subresource Integrity (SRI) and Content Security Policy (CSP)—paired with
automation—significantly reduces exposure to these risks.</p>
<p>However, no defense strategy is complete without regular testing and monitoring. Vigilance, combined with automation,
ensures that your site remains resilient in the face of evolving threats without sacrificing performance or efficiency.</p>

    </main>

    <aside class="post__aside">
        <div class="post__tags">
            
            
                
                <a href="/tags/web/">#web</a>
            
                
                <a href="/tags/security/">#security</a>
            
        </div>
    </aside>
</article>

            </main>

            <footer class="footer">
    <div class="footer__content">
        <p class="footer__attribution">Powered by <a href="https://www.11ty.dev">11ty</a>, based on <a href="https://github.com/yinkakun/eleventy-duo">Eleventy Duo</a></p>
    </div>
</footer>
        </div>
    </body>
</html>